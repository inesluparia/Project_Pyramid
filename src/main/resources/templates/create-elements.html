<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
    <head th:replace="fragments/head.html :: head"></head>
    <body>
    <nav th:replace="fragments/navbar.html :: navbar"></nav>
        <main>
            <h1 th:text="${project.name}"></h1>
            <p th:text="${project.client.name}"></p>
            <p th:if="${project.isActive == false}">Project state: Active</p>
            <p th:if="${project.isActive == true}">Project state: Not active</p>
            <div th:each="task : ${project.tasks}">
                <p th:text="${'Task: ' + task.name}"></p>
                <ul th:each="subtask : ${task.subTasks}">
                    <li th:text="${'Subtask: ' + subtask.name}"></li>
                    <li th:text="${'Description: ' + subtask.description}"></li>
                    <li th:text="${'Approximate man-hours: ' + subtask.durationInManHours}"></li>
                </ul>
            </div>
            <br>
            <br>
            <section>
                <form name="add-task" action="add-task" method="POST" id="add-task">
                    <h3>Add task</h3>
                    Task name: <br>
                    <input type="text" name="name">
                    <br><br>
                    Description: <br>
                    <textarea type="text" name="description" rows="4" cols="50"></textarea><br>
                    <br>
                    <input type="submit" value="add task" form="add-task">
                </form>
            </section>
            <br>
            <br>
            <section th:unless="${project.tasks.isEmpty()}">
                <h3>Add subTask</h3>
                <form action="add-subTask" method="POST" id="add-subTask">
                    Subtask name: <br>
                    <input type="text" name="name">
                    <br><br>
                    Select belonging task: <br>
                    <select name="task" id="task" th:object="${project.tasks}">
                        <option th:each="task: ${project.tasks}" th:value="${task.id}" th:text="${task.name}"></option>
                    </select>
                    <br><br>
                    Description: <br>
                    <textarea type="text" name="description" rows="4" cols="50"></textarea>
                    <br><br>
                    Duration in man-hours: <br>
                    <input type="number" name="duration">
                    <br><br>
                    <input type="submit" value="Add subtask" form="add-subTask">
                </form>
            </section>
            <br>
            <br>
            <button><a href="edit-project">Or edit existing tasks and subtasks</a></button>
        </main>
    </body>
</html>
